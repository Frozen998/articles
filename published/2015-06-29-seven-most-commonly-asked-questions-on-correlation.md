#7问相关

![](http://static.datartisan.com/upload/attachment/2015/06/lOqi4joR.jpg)

###介绍

统计的学习一般从中心趋势开始，随后引入相关、回归和其他一些高级概念。在这些初始的概念中，相关是非常容易被理解的，但当“相关”和其他统计概念如因果、回归、分布、皮尔森相关系数等联系在一起时往往也会给初学者带来困惑。今天将简单介绍与“相关”有关的7个最常见的问题。

###相关系数的数学公式

最常见的相关系数为皮尔森相关系数，计算公式如下：

![](http://www.analyticsvidhya.com/wp-content/uploads/2015/06/pearson.png)

解释：相关系数是两个变量协方差和两变量标准差乘积的比值。相关系数的值在-1到1之间。极值点意味最强相关关系。0 表示非线性相关。

###问题1  相关和相依关系？

如果两个变量没有相依关系那么相关系数为0。但是反过来并不成立，相关系数为0可能存在严格的相依函数关系。例如：

![](http://www.analyticsvidhya.com/wp-content/uploads/2015/06/parabola.jpg)

在这种情形下，x的平方和y呈现严格线性关系，x在右半轴与y负相关而x在左半轴与y正相关。那么他们之间的皮尔森相关系数呢？没错，他们的相关系数为0。这意味着什么？两个有着严格函数相依关系的变量非线性相关！

贴士：相关系数衡量的是两个变量之间的线性关系，并不能表示变量间的非线性关系。

###问题2 相关可以传递？

假设X, Y, Z为随机变量。X，Y是正相关的，Y和Z是正相关的。那么X与Z一定是正相关吗？

正如下一个例子我们将看到的，结果是否定的。不过如果X,Y与Y,Z的相关系数都接近1的话，X,Z之间一定是正相关的。

用C(x,y)来表示x,y之间的相关系数。类似的可以定义C(x,z)，C(y,z)。下式为求解相关传递关系的数学表达：

 C(x,y) = C(y,z) * C(z,x) - Square Root ( (1 - C(y,z)^2 ) *  (1 - C(z,x)^2 ) ) （1）

如果我们希望C(x,y)>0，那么我们只需要等式右边为正，即：

C(y,z) * C(z,x) > Square Root ( (1 - C(y,z)^2 ) *  (1 - C(z,x)^2 ) )

不管C(y,z) > 0或C(y,z) < 0，都可以将上式平方求得约束条件。得到：如果C(x,y)大于0，则C(x,z)，C(y,z)同号，且C(y,z) ^ 2 + C(z,x) ^ 2 > 1

哇哦，这是一个圆的约束。为了更好的解释传递性，我们给出下图：

![](http://www.analyticsvidhya.com/wp-content/uploads/2015/06/correlation-circle.png)

如果两个相关系数构成的点位于A区域，则第三个相关系数为正，如果位于B区域则第三个相关系数为负。在圆内，我们不能描述第三个相关系数的情况。非常有意思的是即使C(y,z) 和 C(z,x) 都取 0.5，C(x,y)依旧是负的.

###问题3 相关系数对于异常值敏感吗？

答案是肯定的。即使只有一个异常值，也可以改变相关系数的方向。下面给出相关系数都为0.81的几种情况：

![](http://www.analyticsvidhya.com/wp-content/uploads/2015/06/correlation-scenarios.png)

除异常点外，X3和 Y3 几乎在一条直线上，而异常点的存在导致了相关系数的偏离。最后一幅图是一个极端的例子，除异常点外，X4几乎是不变的，但由于异常点的存在变成了X4与Y4的高度正相关。总之，当异常值存在时，我们在分析相关系数时要格外注意。

###问题4 因果意味着相关吗？

答案是否定的，因为因果有时只是导致非线性关系。

下图展示了0到12摄氏度下水密度的变化。我们知道温度改变是导致密度改变的原因。但是在4摄氏度时水的密度达到最大。因此在密度和温度之间不是线性相关关系而是非线性相关关系。

![](http://www.analyticsvidhya.com/wp-content/uploads/2015/06/water.gif)

###问题5 简单线性回归和相关系数的关系？

一元简单线性回归和相关系数有很多相似点。
1 皮尔森相关系数的平方和回归中的R^2相同。
2 相关系数和回归都不能解释因果关系

回归和相关系数的不同点在于简单线性回归比相关系数给出了更多的信息，例如：
1 线性回归的斜率给出了自变量每单位变化引起的因变量的平均变化量。而相关系数没有斜率。
2 线性回归的截距表示在自变量为0 的情况下因变量的值。相关系数没有这个信息。
3 我们可以基于线性回归进行预测，而不能基于相关系数进行预测。

###问题6 皮尔森相关系数和斯皮尔曼相关系数关系？

皮尔森相关系数描述变量值之间是怎样线性依赖的。而斯皮尔曼相关系数描述变量的变化趋势之间的关系，是基于变量值在总体中的排序计算的。例如考虑x 与y满足：y = exp(x)。
你会发现皮尔森相关系数为0.25，但是斯皮尔曼相关系数为1。当认为x,y之间为非线性关系时，可采用斯皮尔曼相关系数探索他们之间的关系。或者先采用皮尔森相关系数再采用斯皮尔曼相关系数进行变量间关系的探索。这样可以得知变量之间是线性相关还是变化趋势相似。

###问题7 相关系数和协方差关系？

相关系数是正则化后的协方差。若两个变量的标准差均为1，则其协方差就是相关系数。通过正则化，相关系数的值在-1,到1 之间。协方差由于变量单位的不同是非常难比较的。学生的成绩和指甲的长度（微米）的协方差可能会大于和出勤率的协方差。这是由于第二个变量的单位造成的。因此我们需要将协方差正则化以方便比较。

